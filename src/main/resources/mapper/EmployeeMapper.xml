<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
        PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
        "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.wup.mapper.EmployeeMapper">
    <sql id="base_columns">
        id,name,username,
        password,phone,sex,
        id_number,status,create_time,
        update_time, create_user, update_user
    </sql>
    <sql id="entity_key">
        #{id}, #{name}, #{username},
        #{password}, #{phone}, #{sex},
        #{idNumber}, #{status}, #{createTime},
        #{updateTime}, #{createUser}, #{updateUser}
    </sql>
    <insert id="insert">
        insert into employee(
            id,name,username,
            password,phone,sex,
            id_number,create_time,
            update_time, create_user, update_user
        )
        values(
            #{id}, #{name}, #{username},
            #{password}, #{phone}, #{sex},
            #{idNumber}, #{createTime},
            #{updateTime}, #{createUser}, #{updateUser}
        )
    </insert>

    <select id="findByUsernameAndPassword" resultType="com.wup.entity.Employee">
        select
        <include refid="base_columns"></include>
        from employee where
        username = #{username} and password = #{password}
    </select>
    <select id="findByUsername" resultType="com.wup.entity.Employee">
        select
        <include refid="base_columns"></include>
        from employee where
        username = #{username}
    </select>
    <select id="getAllByName" resultType="com.wup.entity.Employee">
        select
        <include refid="base_columns"></include>
        from employee
        <where>
            <if test="name != null">
                name like concat('%',#{name},'%')
            </if>
        </where>
    </select>

</mapper>
